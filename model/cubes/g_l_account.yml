cubes:
  - name: g_l_account
    sql_table: "\"BUSINESS_CENTRAL\".\"G_L_ACCOUNT\""
    data_source: default

    joins:
      - name: company
        sql: "{CUBE}.\"COMPANY_ID\" = {company}.\"ID\""
        relationship: many_to_one
      
      - name: g_l_entry
        sql: "{CUBE}.\"NO\" = {g_l_entry}.\"G_LACCOUNT_NO\" AND {CUBE}.\"COMPANY_ID\" = {g_l_entry}.\"COMPANY_ID\""
        relationship: one_to_many

    dimensions:
      - name: system_modified_by
        sql: "{CUBE}.\"SYSTEM_MODIFIED_BY\""
        type: string

      - name: system_created_by
        sql: "{CUBE}.\"SYSTEM_CREATED_BY\""
        type: string

      - name: global_dimension_2_filter
        sql: "{CUBE}.\"GLOBAL_DIMENSION_2_FILTER\""
        type: string

      - name: account_category
        sql: "{CUBE}.\"ACCOUNT_CATEGORY\""
        type: string

      - name: omit_default_descr_in_jnl
        sql: "{CUBE}.\"OMIT_DEFAULT_DESCR_IN_JNL\""
        type: boolean

      - name: vat_amt
        sql: "{CUBE}.\"VAT_AMT\""
        type: string

      - name: consol_debit_acc
        sql: "{CUBE}.\"CONSOL_DEBIT_ACC\""
        type: string

      - name: vat_reporting_date_filter
        sql: "{CUBE}.\"VAT_REPORTING_DATE_FILTER\""
        type: string

      - name: add_currency_balance_at_date
        sql: "{CUBE}.\"ADD_CURRENCY_BALANCE_AT_DATE\""
        type: string

      - name: global_dimension_1_code
        sql: "{CUBE}.\"GLOBAL_DIMENSION_1_CODE\""
        type: string

      - name: add_currency_debit_amount
        sql: "{CUBE}.\"ADD_CURRENCY_DEBIT_AMOUNT\""
        type: string

      - name: income_balance
        sql: "{CUBE}.\"INCOME_BALANCE\""
        type: string

      - name: budgeted_credit_amount
        sql: "{CUBE}.\"BUDGETED_CREDIT_AMOUNT\""
        type: string

      - name: tax_area_code
        sql: "{CUBE}.\"TAX_AREA_CODE\""
        type: string

      - name: balance_at_date
        sql: "{CUBE}.\"BALANCE_AT_DATE\""
        type: string

      - name: budgeted_debit_amount
        sql: "{CUBE}.\"BUDGETED_DEBIT_AMOUNT\""
        type: string

      - name: vat_prod_posting_group
        sql: "{CUBE}.\"VAT_PROD_POSTING_GROUP\""
        type: string

      - name: tax_liable
        sql: "{CUBE}.\"TAX_LIABLE\""
        type: boolean

      - name: tax_group_code
        sql: "{CUBE}.\"TAX_GROUP_CODE\""
        type: string

      - name: vat_bus_posting_group
        sql: "{CUBE}.\"VAT_BUS_POSTING_GROUP\""
        type: string

      - name: dimension_set_idfilter
        sql: "{CUBE}.\"DIMENSION_SET_IDFILTER\""
        type: string

      - name: cost_type_no
        sql: "{CUBE}.\"COST_TYPE_NO\""
        type: string

      - name: account_subcategory_descript
        sql: "{CUBE}.\"ACCOUNT_SUBCATEGORY_DESCRIPT\""
        type: string

      - name: business_unit_filter
        sql: "{CUBE}.\"BUSINESS_UNIT_FILTER\""
        type: string

      - name: date_filter
        sql: "{CUBE}.\"DATE_FILTER\""
        type: string

      - name: exchange_rate_adjustment
        sql: "{CUBE}.\"EXCHANGE_RATE_ADJUSTMENT\""
        type: string

      - name: account_type
        sql: "{CUBE}.\"ACCOUNT_TYPE\""
        type: string

      - name: new_page
        sql: "{CUBE}.\"NEW_PAGE\""
        type: boolean

      - name: consol_translation_method
        sql: "{CUBE}.\"CONSOL_TRANSLATION_METHOD\""
        type: string

      - name: additional_currency_net_change
        sql: "{CUBE}.\"ADDITIONAL_CURRENCY_NET_CHANGE\""
        type: string

      - name: system_id
        sql: "{CUBE}.\"SYSTEM_ID\""
        type: string

      - name: company_id
        sql: "{CUBE}.\"COMPANY_ID\""
        type: string

      - name: picture
        sql: "{CUBE}.\"PICTURE\""
        type: string

      - name: global_dimension_1_filter
        sql: "{CUBE}.\"GLOBAL_DIMENSION_1_FILTER\""
        type: string

      - name: direct_posting
        sql: "{CUBE}.\"DIRECT_POSTING\""
        type: boolean

      - name: comment
        sql: "{CUBE}.\"COMMENT\""
        type: boolean

      - name: automatic_ext_texts
        sql: "{CUBE}.\"AUTOMATIC_EXT_TEXTS\""
        type: boolean

      - name: global_dimension_2_code
        sql: "{CUBE}.\"GLOBAL_DIMENSION_2_CODE\""
        type: string

      - name: add_currency_credit_amount
        sql: "{CUBE}.\"ADD_CURRENCY_CREDIT_AMOUNT\""
        type: string

      - name: sat_account_code
        sql: "{CUBE}.\"SAT_ACCOUNT_CODE\""
        type: string

      - name: additional_currency_balance
        sql: "{CUBE}.\"ADDITIONAL_CURRENCY_BALANCE\""
        type: string

      - name: picture_odata_media_read_link
        sql: "{CUBE}.\"PICTURE_ODATA_MEDIA_READ_LINK\""
        type: string

      - name: search_name
        sql: "{CUBE}.\"SEARCH_NAME\""
        type: string

      - name: debit_credit
        sql: "{CUBE}.\"DEBIT_CREDIT\""
        type: string

      - name: gen_bus_posting_group
        sql: "{CUBE}.\"GEN_BUS_POSTING_GROUP\""
        type: string

      - name: default_deferral_template_code
        sql: "{CUBE}.\"DEFAULT_DEFERRAL_TEMPLATE_CODE\""
        type: string

      - name: reconciliation_account
        sql: "{CUBE}.\"RECONCILIATION_ACCOUNT\""
        type: boolean

      - name: default_icpartner_glacc_no
        sql: "{CUBE}.\"DEFAULT_ICPARTNER_GLACC_NO\""
        type: string

      - name: totaling
        sql: "{CUBE}.\"TOTALING\""
        type: string

      - name: name
        sql: "{CUBE}.\"NAME\""
        type: string

      - name: no
        sql: "{CUBE}.\"NO\""
        type: string
        primary_key: true

      - name: no_2
        sql: "{CUBE}.\"NO_2\""
        type: string

      - name: budget_filter
        sql: "{CUBE}.\"BUDGET_FILTER\""
        type: string

      - name: api_account_type
        sql: "{CUBE}.\"API_ACCOUNT_TYPE\""
        type: string

      - name: consol_credit_acc
        sql: "{CUBE}.\"CONSOL_CREDIT_ACC\""
        type: string

      - name: gen_prod_posting_group
        sql: "{CUBE}.\"GEN_PROD_POSTING_GROUP\""
        type: string

      - name: gifi_code
        sql: "{CUBE}.\"GIFI_CODE\""
        type: string

      - name: budget_at_date
        sql: "{CUBE}.\"BUDGET_AT_DATE\""
        type: string

      - name: picture_odata_media_edit_link
        sql: "{CUBE}.\"PICTURE_ODATA_MEDIA_EDIT_LINK\""
        type: string

      - name: gen_posting_type
        sql: "{CUBE}.\"GEN_POSTING_TYPE\""
        type: string

      - name: blocked
        sql: "{CUBE}.\"BLOCKED\""
        type: boolean

      - name: system_created_at
        sql: "{CUBE}.\"SYSTEM_CREATED_AT\""
        type: time

      - name: last_date_modified
        sql: "{CUBE}.\"LAST_DATE_MODIFIED\""
        type: time

      - name: last_modified_date_time
        sql: "{CUBE}.\"LAST_MODIFIED_DATE_TIME\""
        type: time

      - name: system_modified_at
        sql: "{CUBE}.\"SYSTEM_MODIFIED_AT\""
        type: time

    measures:
      - name: count
        type: count
      
      - name: balance
        type: number
        sql: "CAST({CUBE}.\"BALANCE\" AS NUMBER)"
        title: Account Balance
        format: currency
      
      - name: net_change
        type: number
        sql: "CAST({CUBE}.\"NET_CHANGE\" AS NUMBER)"
        title: Net Change
        format: currency
      
      - name: debit_amount
        type: number
        sql: "CAST({CUBE}.\"DEBIT_AMOUNT\" AS NUMBER)"
        title: Debit Amount
        format: currency
      
      - name: credit_amount
        type: number
        sql: "CAST({CUBE}.\"CREDIT_AMOUNT\" AS NUMBER)"
        title: Credit Amount
        format: currency
      
      - name: budgeted_amount
        type: number
        sql: "CAST({CUBE}.\"BUDGETED_AMOUNT\" AS NUMBER)"
        title: Budgeted Amount
        format: currency
    
    segments:
      # Account Type Segments
      - name: balance_sheet_accounts
        sql: "{CUBE}.\"ACCOUNT_CATEGORY\" IN ('Assets', 'Liabilities', 'Equity')"
        title: Balance Sheet Accounts
        description: Filter for balance sheet accounts only
        
      - name: income_statement_accounts
        sql: "{CUBE}.\"ACCOUNT_CATEGORY\" IN ('Income', 'Cost of Goods Sold', 'Expense')"
        title: Income Statement Accounts
        description: Filter for income statement accounts only
        
      - name: asset_accounts
        sql: "{CUBE}.\"ACCOUNT_CATEGORY\" = 'Assets'"
        title: Asset Accounts
        
      - name: liability_accounts
        sql: "{CUBE}.\"ACCOUNT_CATEGORY\" = 'Liabilities'"
        title: Liability Accounts
        
      - name: equity_accounts
        sql: "{CUBE}.\"ACCOUNT_CATEGORY\" = 'Equity'"
        title: Equity Accounts
        
      - name: revenue_accounts
        sql: "{CUBE}.\"ACCOUNT_CATEGORY\" = 'Income'"
        title: Revenue Accounts
        
      - name: expense_accounts
        sql: "{CUBE}.\"ACCOUNT_CATEGORY\" = 'Expense'"
        title: Expense Accounts
        
      - name: cogs_accounts
        sql: "{CUBE}.\"ACCOUNT_CATEGORY\" = 'Cost of Goods Sold'"
        title: COGS Accounts
        
      # Posting Group Segments
      - name: has_general_posting_group
        sql: "{CUBE}.\"GEN_BUS_POSTING_GROUP\" IS NOT NULL OR {CUBE}.\"GEN_PROD_POSTING_GROUP\" IS NOT NULL"
        title: Has General Posting Groups
        description: Accounts with general posting groups assigned
        
      - name: has_vat_posting_group
        sql: "{CUBE}.\"VAT_BUS_POSTING_GROUP\" IS NOT NULL OR {CUBE}.\"VAT_PROD_POSTING_GROUP\" IS NOT NULL"
        title: Has VAT Posting Groups
        description: Accounts with VAT posting groups assigned
        
      # Blocked Status Filtering
      - name: active_accounts
        sql: "{CUBE}.\"BLOCKED\" = false"
        title: Active Accounts
        description: Non-blocked accounts only
        
      - name: blocked_accounts
        sql: "{CUBE}.\"BLOCKED\" = true"
        title: Blocked Accounts
        description: Blocked accounts only
        
      # Direct Posting Filtering
      - name: direct_posting_allowed
        sql: "{CUBE}.\"DIRECT_POSTING\" = true"
        title: Direct Posting Allowed
        description: Accounts allowing direct posting
        
      - name: no_direct_posting
        sql: "{CUBE}.\"DIRECT_POSTING\" = false"
        title: No Direct Posting
        description: Accounts not allowing direct posting
        
      # Reconciliation Accounts
      - name: is_reconciliation_account
        sql: "{CUBE}.\"RECONCILIATION_ACCOUNT\" = true"
        title: Reconciliation Accounts
        description: Accounts marked for reconciliation
        
      # Exchange Rate Adjustment
      - name: requires_exchange_adjustment
        sql: "{CUBE}.\"EXCHANGE_RATE_ADJUSTMENT\" IS NOT NULL AND {CUBE}.\"EXCHANGE_RATE_ADJUSTMENT\" != 'No Adjustment'"
        title: Exchange Rate Adjustment Required
        description: Accounts requiring exchange rate adjustments

    pre_aggregations:
      # Pre-aggregation definitions go here.
      # Learn more in the documentation: https://cube.dev/docs/caching/pre-aggregations/getting-started

